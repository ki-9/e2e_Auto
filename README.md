# RTSM Maven Clinical ìë™í™” í…ŒìŠ¤íŠ¸

Maven Clinical RTSM (Randomization and Trial Supply Management) ì‹œìŠ¤í…œì˜ ìë™í™” í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. í”„ë¡œì íŠ¸ ì„¤ì¹˜

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# Playwright ë¸Œë¼ìš°ì € ì„¤ì¹˜
npx playwright install
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
# .env.example íŒŒì¼ì„ .envë¡œ ë³µì‚¬
cp .env.example .env

# .env íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ ì‹¤ì œ ê°’ ì…ë ¥
nano .env
```

#### í™˜ê²½ ë³€ìˆ˜ ì„¤ëª…

| ë³€ìˆ˜ëª… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|
| `TEST_BASE_URL` | í…ŒìŠ¤íŠ¸ ëŒ€ìƒ URL | `https://staging.rtsm.mavenclinical.com` |
| `TEST_EMAIL` | ë¡œê·¸ì¸ ì´ë©”ì¼ | `your-email@example.com` |
| `TEST_PASSWORD` | ë¡œê·¸ì¸ íŒ¨ìŠ¤ì›Œë“œ | `your-password` |
| `TEST_DEVICE_KEY` | ë””ë°”ì´ìŠ¤ ì¸ì¦ í‚¤ | `eyJhbGciOiJIUzUxMi...` |
| `TEST_TIMEOUT` | í…ŒìŠ¤íŠ¸ íƒ€ì„ì•„ì›ƒ (ms) | `30000` |

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
project/
â”œâ”€â”€ .env                          # í™˜ê²½ ë³€ìˆ˜ (git ì œì™¸)
â”œâ”€â”€ .env.example                  # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â”œâ”€â”€ .gitignore                    # Git ë¬´ì‹œ íŒŒì¼
â”œâ”€â”€ package.json                  # í”„ë¡œì íŠ¸ ì„¤ì •
â”œâ”€â”€ playwright.config.ts          # Playwright ì„¤ì •
â”œâ”€â”€ README.md                     # í”„ë¡œì íŠ¸ ì„¤ëª…ì„œ
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ helpers/                  # ê³µí†µ í—¬í¼ í•¨ìˆ˜ë“¤
â”‚   â”‚   â”œâ”€â”€ test-helpers.ts       # í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ page-helpers.ts       # í˜ì´ì§€ ê´€ë ¨ í—¬í¼
â”‚   â”‚   â”œâ”€â”€ global-setup.ts       # ì „ì—­ ì„¤ì •
â”‚   â”‚   â””â”€â”€ global-teardown.ts    # ì „ì—­ ì •ë¦¬
â”‚   â”œâ”€â”€ auth/                     # ì¸ì¦ ê´€ë ¨ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â””â”€â”€ login.test.ts         # ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ dashboard/                # ëŒ€ì‹œë³´ë“œ ê´€ë ¨ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â””â”€â”€ study-list.test.ts    # ìŠ¤í„°ë”” ëª©ë¡ í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ study/                    # ìŠ¤í„°ë”” ê´€ë ¨ í…ŒìŠ¤íŠ¸
â”‚       â””â”€â”€ navigation.test.ts    # ìŠ¤í„°ë”” ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸
â””â”€â”€ test-results/                 # í…ŒìŠ¤íŠ¸ ê²°ê³¼ (ìë™ ìƒì„±)
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

### ì¸ì¦ í…ŒìŠ¤íŠ¸ (`tests/auth/`)
- **í˜ì´ì§€ ì ‘ì† í…ŒìŠ¤íŠ¸**: ê¸°ë³¸ URL ì ‘ì† ë° ë¡œê·¸ì¸ í¼ í™•ì¸
- **ë””ë°”ì´ìŠ¤ í‚¤ ì—†ì´ ë¡œê·¸ì¸**: ì¼ë°˜ ë¡œê·¸ì¸ ì‹œ ì¸ì¦ë²ˆí˜¸ ë‹¨ê³„ í™•ì¸
- **ë””ë°”ì´ìŠ¤ í‚¤ë¡œ ë¡œê·¸ì¸ ë° ë¡œê·¸ì•„ì›ƒ**: ì „ì²´ ì‚¬ìš©ì ì—¬ì • ê²€ì¦ â­

### ëŒ€ì‹œë³´ë“œ í…ŒìŠ¤íŠ¸ (`tests/dashboard/`)
- **ë¡œê·¸ì¸ í›„ ê¸°ë³¸ ê¸°ëŠ¥**: ëŒ€ì‹œë³´ë“œ ìš”ì†Œ ë° ê¸°ëŠ¥ í™•ì¸
- **ìŠ¤í„°ë”” ëª©ë¡ ê¸°ëŠ¥**: í™˜ê²½ë³„/ìƒíƒœë³„ ìŠ¤í„°ë”” ì •ë³´ ê²€ì¦

### ìŠ¤í„°ë”” í…ŒìŠ¤íŠ¸ (`tests/study/`)
- **ìŠ¤í„°ë”” ì„ íƒ ë° Dashboard ì´ë™**: Protocol No. ë§í¬ë¥¼ í†µí•œ ì‹¤ì œ Dashboard ì§„ì…
- **ìŠ¤í„°ë”” ë©”ë‰´ ë„¤ë¹„ê²Œì´ì…˜**: Subject, IP Management, Study Setup ë“± ë©”ë‰´ í…ŒìŠ¤íŠ¸

## ğŸ”§ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

### ê¸°ë³¸ ì‹¤í–‰ ëª…ë ¹ì–´

```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test

# ë¸Œë¼ìš°ì € ì°½ì„ ë³´ë©´ì„œ ì‹¤í–‰
npm run test:headed

# ìˆœì°¨ ì‹¤í–‰ (ì•ˆì „í•¨)
npm run test:single

# ë³‘ë ¬ ì‹¤í–‰ (ë¹ ë¦„) 
npm run test:parallel

# ë””ë²„ê·¸ ëª¨ë“œ
npm run test:debug

# UI ëª¨ë“œ
npm run test:ui

# í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¦¬í¬íŠ¸
npm run report
```

### íŠ¹ì • í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ì¸ì¦ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npx playwright test tests/auth/

# ëŒ€ì‹œë³´ë“œ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npx playwright test tests/dashboard/

# ìŠ¤í„°ë”” í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npx playwright test tests/study/

# íŠ¹ì • í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‹¤í–‰
npx playwright test tests/auth/login.test.ts

# íŠ¹ì • í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰
npx playwright test --grep "ë””ë°”ì´ìŠ¤ í‚¤ë¡œ ë¡œê·¸ì¸"
```

### ë¸Œë¼ìš°ì €ë³„ ì‹¤í–‰

```bash
# Chromeë§Œ
npx playwright test --project=chromium

# Firefoxë§Œ
npx playwright test --project=firefox

# Safarië§Œ
npx playwright test --project=webkit
```

## ğŸ—ï¸ í—¬í¼ í•¨ìˆ˜ êµ¬ì¡°

### `tests/helpers/test-helpers.ts`
- **í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬**: `validateEnvironmentVariables()`, `TEST_CONFIG`
- **ì¸ì¦ ê´€ë ¨**: `setDeviceAuthenticationKey()`, `performLogin()`
- **íŒì—… ì²˜ë¦¬**: `handleDuplicateLoginPopup()`

### `tests/helpers/page-helpers.ts`
- **í˜ì´ì§€ ê²€ì¦**: `verifyLoginSuccess()`, `verifyDashboardFunctionality()`
- **ë¡œë”© ëŒ€ê¸°**: `waitForTableLoading()`

## ğŸ” ì£¼ìš” ê¸°ëŠ¥

### 1. í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ ì„¤ì •
- ë¯¼ê°í•œ ì •ë³´ëŠ” `.env` íŒŒì¼ë¡œ ë¶„ë¦¬
- í…ŒìŠ¤íŠ¸ ì‹œì‘ ì „ ìë™ ê²€ì¦

### 2. ì¤‘ë³µ ë¡œê·¸ì¸ íŒì—… ìë™ ì²˜ë¦¬
- "í•´ë‹¹ ê³„ì •ìœ¼ë¡œ ì´ë¯¸ ë¡œê·¸ì¸ í•œ ì‚¬ìš©ìê°€ ìˆìŠµë‹ˆë‹¤" íŒì—… ìë™ ê°ì§€
- ë‹¤ì–‘í•œ í™•ì¸ ë²„íŠ¼ í˜•íƒœ ì§€ì› (Confirm, í™•ì¸, OK ë“±)

### 3. ë””ë°”ì´ìŠ¤ í‚¤ ê¸°ë°˜ 2FA ìš°íšŒ
- ì¸ì¦ë²ˆí˜¸ ì…ë ¥ ë‹¨ê³„ ìë™ ìƒëµ
- ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ëŠ” ì •ìƒ ìˆ˜í–‰í•˜ë©´ì„œ íš¨ìœ¨ì„± í™•ë³´

### 4. React ê¸°ë°˜ í˜ì´ì§€ êµ¬ì¡° ì§€ì›
- ì‹¤ì œ `<table>` ìš”ì†Œê°€ ì•„ë‹Œ div ê¸°ë°˜ í…Œì´ë¸” êµ¬ì¡° ëŒ€ì‘
- ë™ì  ë¡œë”© ì™„ë£Œ ê°ì§€

### 5. ì‹¤ì œ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
- ìŠ¤í„°ë”” ëª©ë¡ â†’ Protocol No. í´ë¦­ â†’ Dashboard ì´ë™ â†’ Back to Home

## ğŸ“Š ë¦¬í¬íŠ¸

í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„ ë‹¤ìŒ í˜•íƒœì˜ ë¦¬í¬íŠ¸ê°€ ìƒì„±ë©ë‹ˆë‹¤:

- **HTML ë¦¬í¬íŠ¸**: `test-results/` í´ë”
- **JSON ê²°ê³¼**: `test-results/results.json`
- **JUnit XML**: `test-results/results.xml`

## ğŸš¨ ë¬¸ì œ í•´ê²°

### í™˜ê²½ ë³€ìˆ˜ ì˜¤ë¥˜
```
Error: í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤: TEST_EMAIL, TEST_PASSWORD
```
â†’ `.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  í•„ìš”í•œ ê°’ë“¤ì„ ì„¤ì •í•˜ì„¸ìš”.

### ë””ë°”ì´ìŠ¤ í‚¤ ë§Œë£Œ
```
Error: ì¸ì¦ë²ˆí˜¸ ì…ë ¥ì´ í•„ìš”í•œ ìƒíƒœì…ë‹ˆë‹¤
```
â†’ ìƒˆë¡œìš´ ë””ë°”ì´ìŠ¤ í‚¤ë¥¼ ë¸Œë¼ìš°ì €ì—ì„œ ì¶”ì¶œí•˜ì—¬ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.

#### ë””ë°”ì´ìŠ¤ í‚¤ ì–»ëŠ” ë°©ë²•
1. ë¸Œë¼ìš°ì €ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ë¡œê·¸ì¸
2. ê°œë°œì ë„êµ¬ â†’ Application â†’ Cookies
3. `cream:auth:device:key:staging` ì¿ í‚¤ ê°’ ë³µì‚¬
4. `.env` íŒŒì¼ì˜ `TEST_DEVICE_KEY` ì—…ë°ì´íŠ¸

### ë¸Œë¼ìš°ì € ì„¤ì¹˜ ì˜¤ë¥˜
```bash
npx playwright install --force-reinstall
```

### í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ë””ë²„ê¹…
```bash
# í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ í•´ì œ
npm run test:headed

# ë””ë²„ê·¸ ëª¨ë“œë¡œ ë‹¨ê³„ë³„ ì‹¤í–‰
npm run test:debug

# íŠ¹ì • í…ŒìŠ¤íŠ¸ë§Œ ë””ë²„ê·¸
npx playwright test --debug tests/auth/login.test.ts
```

## ğŸ”® í–¥í›„ í™•ì¥ ê³„íš

### ì¶”ê°€ ì˜ˆì • í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ
```
tests/
â”œâ”€â”€ subject/                      # í”¼í—˜ì ê´€ë¦¬ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ enrollment.test.ts        # í”¼í—˜ì ë“±ë¡
â”‚   â””â”€â”€ randomization.test.ts     # ë¬´ì‘ìœ„ë°°ì •
â”œâ”€â”€ ip-management/                # IP ê´€ë¦¬ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ delivery.test.ts          # IP ë°°ì†¡
â”‚   â”œâ”€â”€ inventory.test.ts         # ì¬ê³  ê´€ë¦¬
â”‚   â””â”€â”€ accountability.test.ts    # IP ì¶”ì 
â”œâ”€â”€ study-setup/                  # ìŠ¤í„°ë”” ì„¤ì • í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ randomization-settings.test.ts
â”‚   â””â”€â”€ ip-supply-settings.test.ts
â””â”€â”€ user-management/              # ì‚¬ìš©ì ê´€ë¦¬ í…ŒìŠ¤íŠ¸
    â”œâ”€â”€ user-roles.test.ts
    â””â”€â”€ site-management.test.ts
```

### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
- ë¡œë”© ì‹œê°„ ì¸¡ì •
- ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- ë™ì‹œ ì‚¬ìš©ì ì‹œë®¬ë ˆì´ì…˜

### API í…ŒìŠ¤íŠ¸ í†µí•©
- REST API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
- ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • í›„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
2. ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì¶”ê°€ ì‹œ ì ì ˆí•œ í´ë”ì— ë°°ì¹˜
3. í—¬í¼ í•¨ìˆ˜ëŠ” `tests/helpers/`ì— ì¶”ê°€
4. ë¯¼ê°í•œ ì •ë³´ëŠ” ë°˜ë“œì‹œ í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬
5. README ì—…ë°ì´íŠ¸

## ğŸ“ ë¼ì´ì„ ìŠ¤

MIT License